<head>
  <title>DiscoVR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
</body>

<template name="layout">
  {{> yield "header"}}
  {{> yield "main"}}
  {{> yield "footer"}}
</template>

<template name="navbar">
<div class="container-fluid">
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header navbar-right">

        <!-- Search button -->
        <button type="button" class="btn btn-default navbar-btn js-search-button" data-toggle="modal" data-target="#js-search-modal" data-tooltip="true" data-placement="bottom" title="search titles">
          <i class="glyphicon glyphicon-search"></i>
        </button>

        <!-- Collapsed toggle button -->
        <button type="button" class="navbar-toggle collapsed js-navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-links" aria-expanded="false" data-tooltip="true" data-placement="bottom" title="filter titles">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <!-- Nav links for toggling -->
      <div class="collapse navbar-collapse" id="navbar-collapse-links">
        <ul class="nav navbar-nav">
          <li><p class="navbar-text">Headset:</p></li>
          <li><a href="#" class="js-headset" data-toggle="tooltip" data-placement="auto bottom" title="">Rift</a></li>
          <li><a href="#" class="js-headset" data-toggle="tooltip" data-placement="auto bottom" title="">Vive</a></li>
          <li><p class="navbar-text">Controller:</p></li>
          <li><a href="#" class="js-gamepad" data-toggle="tooltip" data-placement="auto bottom" title="">Gamepad</a></li>
          <li><a href="#" class="js-motion" data-toggle="tooltip" data-placement="auto bottom" title="">Motion</a></li>
          <li class="multiline"><a href="#" class="js-kbm" data-toggle="tooltip" data-placement="auto bottom" title="">Keyboard<span> &amp; Mouse</span></a></li>
          <li><p class="navbar-text">Genre:</p></li>
          <li><a href="#" class="js-singleplayer" data-toggle="tooltip" data-placement="auto bottom" title="">Singleplayer</a></li>
          <li><a href="#" class="js-multiplayer" data-toggle="tooltip" data-placement="auto bottom" title="">Multiplayer</a></li>
        </ul>       
      </div><!-- /Nav links -->
    </div><!-- /Container -->
  </nav>

  <!-- Filters -->
  {{> vr_filters}}


  <!-- Search modal -->
  <div class="modal fade bs-example-modal-sm" id="js-search-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <form role="search" id="search_form">
          <input type="text" class="form-control" placeholder="Search" id="search_input" autocomplete="off">
        </form>
      </div>
    </div>
  </div>

</div>
</template>


<template name="vr_filters">
  {{#if getSession}}
  <div class="well well-sm">
    <h4>
    Results shown are filtered.

    <a href="#" class="js-reset-filters label label-primary">Clear</a>
    </h4>
  </div>
  {{/if}}
</template>


<template name="vr_list">
<div class="container-fluid">

    {{#unless currentUser}}
    <div class="row">
      <div class="col-md-5 col-sm-6 col-xs-2">
        <h3>Title</h3>
      </div>

      <div class="col-md-4 col-sm-3 col-xs-4 text-center dynamic-center">
        <h3>Features</h3>
      </div>

      <div class="col-md-3 col-sm-3 col-xs-6 text-center">
        <h3>Store</h3>
      </div>
    </div>

      {{#each supported_title}}
        {{> vr_title}}
      {{/each}}
    {{else}}
    <div class="row">
      <div class="col-xs-12">
        <h3>Titles Administration - logged in as {{getUsername}}</h3>
      </div>
    </div>
      {{#each supported_title}}
        {{> vr_admin_title}}
      {{/each}}
    {{/unless}}


</div>

</template>

<template name="vr_title">

<!-- Seperator row -->
<div class="row">
  <div class="col-xs-12">
    <hr>
  </div>
</div>

<div class="row">
  <div class="col-md-5 col-sm-6 col-xs-12">
    <h4>{{title}}</h4>
  </div>

  <div class="col-md-4 col-sm-3 col-xs-6 text-center dynamic-center">

          {{#if support_rift}}
            {{#if support_vive}}
            <a href="#" class="js-headset">Rift</a>, <a href="#" class="js-headset">Vive</a>
            {{else}}
            <a href="#" class="js-headset">Rift</a>
            {{/if}}
          {{else}}
            {{#if support_vive}}
            <a href="#" class="js-headset">Vive</a>
            {{/if}}
          {{/if}}


          {{#if support_singleplayer}}
          <a href="#" class="js-singleplayer">
            <i class="fa fa-user fa-lg" aria-hidden="true" title="singleplayer"></i>
          </a>
          {{/if}}
          {{#if support_multiplayer}}
          <a href="#" class="js-multiplayer">
            <i class="fa fa-users fa-lg" aria-hidden="true" title="multiplayer"></i>
          </a>
          {{/if}}
          {{#if support_gamepad}}
          <a href="#" class="js-gamepad">
            <i class="fa fa-gamepad fa-lg" aria-hidden="true" title="supports gamepad"></i>
          </a>
          {{/if}}
          {{#if support_motion}}
          <a href="#" class="js-motion">
            <i class="fa fa-hand-paper-o fa-lg" aria-hidden="true" title="supports motion controllers"></i>
          </a>
          {{/if}}
          {{#if support_kbm}}
          <a href="#" class="js-kbm">
            <i class="fa fa-keyboard-o fa-lg" aria-hidden="true" title="supports keyboard and mouse"></i>
          </a>
          {{/if}}

        </div>
        <div class="col-md-3 col-sm-3 col-xs-6 text-center">
          {{{getOculusLink support_rift support_vive rift_id}}}
          {{{getSteamLink support_rift support_vive steam_id}}}
  </div>
</div>

</template>

<template name="vr_admin_title">
<!-- Seperator row -->
<div class="row">
  <div class="col-xs-12">
    <hr>
  </div>
</div>


<div>
          <h4>{{title}}</h4>

          <div class="btn-toolbar sm" aria-label="Supported">

            <div class="btn-group" data-toggle="buttons" aria-label="Headset">

              <label class="btn btn-success {{#if support_rift}}active{{/if}}">
                <input type="checkbox" autocomplete="off">Rift
              </label>

              <label class="btn btn-success {{#if support_vive}}active{{/if}}">
                <input type="checkbox" autocomplete="off">Vive
              </label>
            </div>



            <div class="btn-group" data-toggle="buttons" aria-label="Gameplay">

              <label class="btn btn-success {{#if support_singleplayer}}active{{/if}}">
                <input type="checkbox" autocomplete="off">
                <i class="fa fa-user" aria-hidden="true" title="singleplayer"></i>
              </label>


              <label class="btn btn-success {{#if support_multiplayer}}active{{/if}}">
                <input type="checkbox" autocomplete="off">
                <i class="fa fa-users" aria-hidden="true" title="multiplayer"></i>
              </label>

              <label class="btn btn-success {{#if support_gamepad}}active{{/if}}">
                <input type="checkbox" autocomplete="off">
                <i class="fa fa-gamepad" aria-hidden="true" title="supports gamepad"></i>
              </label>


              <label class="btn btn-success {{#if support_motion}}active{{/if}}">
                <input type="checkbox" autocomplete="off">
                <i class="fa fa-hand-paper-o" aria-hidden="true" title="supports motion controllers"></i>
              </label>


              <label class="btn btn-success {{#if support_kbm}}active{{/if}}">
                <input type="checkbox" autocomplete="off">
                <i class="fa fa-keyboard-o" aria-hidden="true" title="supports keyboard and mouse"></i>
              </label>
            </div>
          </div>

          <label for="basic-url">Oculus</label>
            <div class="input-group">
            <span class="input-group-addon" id="basic-addon3">https://www.oculus.com/experiences/rift/</span>
            <input type="text" class="form-control" id="rift_id" aria-describedby="basic-addon3" value="{{rift_id}}">
          </div>

          <label for="basic-url">Steam</label>
            <div class="input-group">
            <span class="input-group-addon" id="basic-addon3">http://store.steampowered.com/app/</span>
            <input type="text" class="form-control" id="steam_id" aria-describedby="basic-addon3" value="{{steam_id}}">
          </div>

</div>
</template>

<template name="site_info">
<div class="container-fluid">
  Site by Janne
  {{> loginButtons}}
  <br><br><br><br><br><br><br><br><br><br><br><br>

  <!-- Div's for breakpoint detection -->
  <div class="device-xs visible-xs"></div>
  <div class="device-sm visible-sm"></div>
  <div class="device-md visible-md"></div>
  <div class="device-lg visible-lg"></div>

</div>
<script type="text/javascript">
  $(function () {

    // initialize tooltips
    $('[data-toggle="tooltip"]').tooltip();

    // initialize data-tooltip as tooltip (to allow data-toggle to open modal)
    $('[data-tooltip="true"]').tooltip();

    // hide tooltip and focus search_input on search modal shown
    $('#js-search-modal').on('shown.bs.modal', function () {
      $('.js-search-button').tooltip('hide');
      $('#search_input').select();
    });


    // window resize function for dynamic styling
    $(window).resize(function () {

      waitForFinalEvent(function(){

      if( isBreakpoint('xs') ) {
        $('.dynamic-center').removeClass('text-center');
      } else {
        $('.dynamic-center').addClass('text-center');
      }

      }, 15, fullDateString.getTime())
    });

  function isBreakpoint( alias ) {
    return $('.device-' + alias).is(':visible');
  }

  var waitForFinalEvent=function(){var b={};return function(c,d,a){a||(a="I am a banana!");b[a]&&clearTimeout(b[a]);b[a]=setTimeout(c,d)}}();
  var fullDateString = new Date();

  });


</script>
</template>